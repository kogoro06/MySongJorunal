<div class="min-h-screen bg-customred text-white flex items-center justify-center py-10">
  <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl space-y-8">
    
    <!-- 📅 日付表示 -->
      <div class="text-xl font-semibold text-gray-700 text-end">
        <%= @journal.created_at.strftime('%Y年%m月%d日') %>
      </div>

    <!-- 📝 タイトル表示 -->
    <div class="text-center">
      <h2 class="text-md font-medium text-gray-700 mb-2">日記タイトル</h2>
      <p class="text-xl font-bold text-gray-900"><%= @journal.title %></p>
    </div>

    <!-- 🎵 曲情報（選択後のみ表示） -->
    <% if @journal.song_name.present? || @journal.artist_name.present? || @journal.album_image.present? %>
      <div class="bg-gray-100 p-6 text-center rounded-lg shadow-inner space-y-4">
        <h2 class="text-xl font-bold text-gray-800 mb-4">🎵 選択した曲情報</h2>
        
        <% if @journal.artist_name.present? %>
          <p class="text-lg font-medium text-gray-800">
            🎤 アーティスト: <%= @journal.artist_name %>
          </p>
        <% end %>
        
        <% if @journal.song_name.present? %>
          <p class="text-lg font-medium text-gray-800">
            🎼 曲名: <%= @journal.song_name %>
          </p>
        <% end %>
        
        <% if @journal.album_image.present? %>
          <div class="text-center">
            <a href="https://open.spotify.com/track/<%= @journal.spotify_track_id %>" target="_blank">
              <img src="<%= @journal.album_image %>" alt="アルバム画像" class="w-64 h-64 object-cover mx-auto rounded-lg shadow-md">
            </a>
          </div>
        <% end %>
        
        <% if @journal.preview_url.present? %>
          <div>
            <audio controls class="w-full rounded-lg">
              <source src="<%= @journal.preview_url %>" type="audio/mpeg">
              お使いのブラウザは音声プレビューをサポートしていません。
            </audio>
          </div>
        <% end %>
        
        <!-- 🌐 Spotifyリンク -->
        <div class="flex items-center justify-center mt-4 gap-2">
          <a href="https://open.spotify.com/track/<%= @journal.spotify_track_id %>" target="_blank" class="flex items-center gap-2 text-green-500 hover:text-green-400">
            <%= image_tag 'spotify_logo.png', alt: 'Spotifyロゴ', class: 'h-6 w-auto' %>
            <span class="text-sm font-medium underline">Spotifyで聴く</span>
          </a>
        </div>
      </div>
    <% end %>

    <!-- 📝 本文表示 -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md text-center">
      <h2 class="text-md font-medium text-gray-700 mb-2">📖 本文</h2>
      <p class="text-md text-gray-800 font-bold p-4 rounded-md">
        <%= @journal.content %>
      </p>
    </div>

    <!-- 😊 感情表示 -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md text-center">
      <h2 class="text-md font-medium text-gray-700 mb-2">😊 感情</h2>
      <p class="text-md text-gray-800 font-bold p-4 rounded-md">
        <%= @journal.emotion %>
      </p>
    </div>
    <!-- ✏️ アクションボタン -->
    <% unless request.referer&.include?('timeline') %>
      <div class="flex justify-between items-center mt-6">
        <%= link_to "✏️ 編集", edit_journal_path(@journal), class: "px-4 py-2 bg-yellow-500 text-white font-medium rounded-md hover:bg-yellow-600 transition" %>
        <%= button_to "🗑️ 削除", journal_path(@journal), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "px-4 py-2 bg-red-500 text-white font-medium rounded-md hover:bg-red-600 transition" %>
      </div>
    <% end %>

    <!-- 🔙 戻るボタン -->
    <div class="text-center mt-6">
      <% if request.referer&.include?('timeline') %>
        <%= link_to "← タイムラインに戻る", timeline_journals_path, class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% elsif request.referer&.include?('mypage') %>
        <%= link_to "← マイページに戻る", mypage_path, class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% elsif request.referer&.include?('other_user') %>
        <%= link_to "← #{@user.name}さんのページに戻る", other_user_path(@user), class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% else %>
        <%= link_to "← 日記一覧に戻る", journals_path, class: "text-blue-500 hover:underline text-sm font-medium" %>
      <% end %>
    </div>
  </div>
</div>
